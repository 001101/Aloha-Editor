<!doctype html>
<html>
	<head>
		<title>Aloha Editor</title>
		<meta charset="UTF-8">
		<link href='http://fonts.googleapis.com/css?family=Open+Sans:300,700' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" type="text/css" href="../../src/aloha.css">
		<style>
			body, button {
				font-family: 'Open Sans', sans-serif;
				font-size: 16px;
			}
			.aloha-block {
				width: 100px;
				height: 100px;
				padding: 10px;
				background: #999;
				color: #fff;
				text-align: center;
				display: table-cell;
				vertical-align: middle;
				cursor: -webkit-grab;
				cursor: -moz-grab;
				box-shadow: 2px 2px 10px rgba(0,0,0,0.2) inset;
			}
			textarea {
				font-family: monospace;
				font-size: 16px;
				width: 100%;
			}
			.example {
				padding: 10px;
				margin: 10px 0px 10px 0px;
				background: #999;
				color: #fff;
				box-shadow: 2px 2px 10px rgba(0,0,0,0.2) inset;
				display: block;
			}
			div.example {
				background: white;
				color: black;
			}
			.aloha-block:hover { background: #df215a; }
			img.aloha-block {
				width: auto;
				height: auto;
				display: block;
				padding: 0;
			}
			ol {
			  counter-reset: counter;
			  list-style-type: none;
			}
			ol>li:before {
				counter-increment: counter;
				content: counters(counter, ".") ") ";
				margin-left: -1em;
			}
		</style>
	</head>
	<body>
		<div>
			<h1>Aloha Editor Boundaries</h1>
			
			<p>
				Boundaries represent a location in the DOM that can be selected. They 
				are represented by an array which contains the start node and an offset.
			</p>

			<textarea class="example">// a single boundary
var boundary = [ domNode, 0 ];</textarea>

			<p>
				Boundaries are Aloha Editor's way to handle selections transparently across
				browsers.
				If you just want to place the caret, you'll only need a single boundary.
				If you want to select text you will need to create two boundaries - one
				for the start and one for the end position of the selection.
			</p>


			<h2>Placing the caret</h2>
			
			<p>Placing the caret at the first position of a text is quite straightforward.</p>

			<textarea class="example">var boundary = [
	// select the text node from the example
	document.querySelector('#example-place-caret p').firstChild,
	// put the cursor before the first character
	0 ];
// move the browsers selection to the boundary
aloha.boundaries.select(boundary);
// put Aloha Editor's caret there too
aloha.selections.show(caret, boundary);</textarea>

			<button onclick="executeExample()">Execute Example</button>
			
			<div id="example-place-caret" class="example aloha-editable">
				<p>This is my <b>first</b> paragraph.</p>
			</div>


			<h2>Selecting some text</h2>

			<p>Select "This is" from the text.</p>
			
			<textarea class="example">var textNode = document.querySelector('#example-select-text p').firstChild;
var startBoundary = [ textNode,	0 ];
// an end offset of "7" will place the end boundary
// right after the seven letters of "This is"
var endBoundary = [ textNode, 7 ];

aloha.boundaries.select(startBoundary, endBoundary);
aloha.selections.show(caret, endBoundary);</textarea>

			<button onclick="executeExample()">Execute Example</button>
			
			<div id="example-select-text" class="example aloha-editable">
				<p>This is my <b>first</b> paragraph.</p>
			</div>


			<h2>Retrieving the current boundaries</h2>

			<p>
				The API allows you to retrieve the currently active boundaries.
				Keep in mind that you need to have clicked somewhere first to
				have an active selection.
			</p>

			<textarea class="example">// retrieve current boundaries
aloha.boundaries.get();</textarea>

			
			<h2>Boundary traversal</h2>

			<p>
				The API also allows you to use traversal algorithms to simplify
				boundary placement.
			</p>

			<textarea class="example">var textNode = document.querySelector('#example-boundary-traversal p').firstChild;
var boundary = [ textNode, 0 ];

// move the boundary to the end of the word
boundary = aloha.traversing.next(boundary, 'word');

aloha.boundaries.select(boundary);
aloha.selections.show(caret, boundary);
</textarea>

			<button onclick="executeExample()">Execute Example</button>

			<div id="example-boundary-traversal" class="example aloha-editable">
				<p>This is my <b>first</b> paragraph.</p>
			</div>


			<h2>Paths</h2>

			<p>
				
			</p>


			<h2>insertText/Node at boundary</h2>
		</div>
		<script src="../../src/require-pronto.js"></script>
		<script src="../../src/require-pronto.dev.js"></script>
		<script>
require([
	'../../src/aloha',
	'../../src/boundaries'
], function (
	aloha,
	Arrays,
	Boromir,
	Boundaries,
	Dom
) {
	'use strict';
	
	var caret = document.querySelector('.aloha-caret');

	[].forEach.call(document.querySelectorAll('.aloha-editable'), aloha);
	
	window.executeExample = function () {
		var code = window.event.target.previousElementSibling.innerHTML;
		window.event.target.blur();
		eval(code);
	};

	// properly size the height of all textareas
	[].forEach.call(document.querySelectorAll('textarea'), function (textarea) {
		var lines = textarea.innerHTML.split('\n').length;
		textarea.rows = lines;
	});
});
		</script>
	</body>
</html>

