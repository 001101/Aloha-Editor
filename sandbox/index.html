<!doctype html>
<html>
	<head>
		<title>Aloha Editor</title>
		<meta charset="UTF-8">
		<link rel="stylesheet" type="text/css" href="../src/aloha.css">
		<style>
			@font-face {
			  font-family: 'Open Sans';
			  font-style: normal;
			  font-weight: 300;
			  src: local('Open Sans Light'), local('OpenSans-Light'), url(open-sans.woff) format('woff');
			}
			@font-face {
			  font-family: 'Open Sans';
			  font-style: normal;
			  font-weight: 700;
			  src: local('Open Sans Bold'), local('OpenSans-Bold'), url(open-sans-bold.woff) format('woff');
			}
		</style>
	</head>
	<body>
		<div class="aloha-editable" contentEditable="true">
			<h1>Aloha Editor</h1>
			<p>
				Lorem ipsum dolor sit amet, <b>consec<i>tet</i>ur</b> adipiscing
				elit. Donec a diam lectus. Sed sit amet ipsum mauris.  Maecenas
				congue ligula ac quam viverra nec consectetur ante hendrerit.
			</p>
			<p>
				Donec et mollis dolor.  Praesent et diam eget libero egestas
				mattis sit amet vitae augue.  Nam tincidunt congue enim, ut
				porta lorem lacinia consectetur. Donec ut libero sed arcu
				vehicula ultricies a non tortor.
			</p>
			<p>
				<b>Lorem ipsum</b> dolor sit amet, consectetur adipiscing elit.
				Aenean ut gravida lorem. Ut turpis felis, pulvinar a semper sed,
				adipiscing id dolor.  Pellentesque auctor nisi id magna
				consequat sagittis.
			</p>
			<p>
				Curabitur dapibus enim sit amet elit pharetra tincidunt feugiat
				nisl imperdiet. Ut convallis libero in urna ultrices accumsan.
				Donec sed odio eros. Donec viverra mi quis quam pulvinar at
				malesuada arcu rhoncus. Cum sociis natoque penatibus et magnis
				dis parturient montes, nascetur ridiculus mus.  In rutrum
				accumsan ultricies. Mauris vitae nisi at sem facilisis semper ac
				in est.
			</p>
		</div>
		<script src="mandox.js"></script>
		<script src="../src/require-pronto.js"></script>
		<script src="../src/require-pronto.dev.js"></script>
		<script src="../build/aloha.js"></script>
		<script>
			(function () {
				'use strict';
				function setVersion (version) {
					var h1 = document.getElementsByTagName('h1')[0];
					h1.innerHTML = h1.innerHTML + ': <span style="color:#df215a">' + version + '</span>';
				}
				function main(ranges, editing) {
					var range = ranges.create(
						document.getElementsByTagName('b')[0], 1,
						document.getElementsByTagName('b')[0], 2
					);
					ranges.select(ranges.extendToWord(range));
					range = ranges.get();
					editing.wrap(range, 'u');
					ranges.insertText(ranges.stableRange(range), '{');
					ranges.collapseAtEnd(range)
					ranges.insertText(range, '}');
					ranges.collapseAtEnd(range);
					ranges.select(range);
				}
				function load(aloha) {
					main(aloha.ranges, aloha.editing);
				}
				if ('undefined' === typeof aloha) {
					require(['../src/aloha'], load);
					setVersion('src');
				} else {
					main(load)
					setVersion('build');
				}
			}());
		</script>
	</body>
</html>

